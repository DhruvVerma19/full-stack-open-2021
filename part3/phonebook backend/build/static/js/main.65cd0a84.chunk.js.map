{"version":3,"sources":["components/Person.js","components/personForm.js","components/personFilter.js","services/persons.js","components/Notifications.js","App.js","index.js"],"names":["Person","props","name","number","data-id","id","onClick","handleDelClick","PersonsList","personslist","personList","map","person","PersonForm","onSubmit","handleFormSubmit","onChange","handleNameChange","value","nameValue","handleNumberChange","numberValue","type","PersonFilter","handleFilterChange","url","axios","get","then","response","data","post","delete","newDetails","put","favorableStyle","color","background","fontSize","border","borderRadius","padding","marginBottom","errorStyle","Notification","message","includes","style","className","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","nameFilter","setNameFilter","errMessage","setErrMessage","useEffect","personService","fetchPersons","personName","toLocaleUpperCase","filterPersonList","filter","toUpperCase","event","parseInt","target","dataset","specificPerson","find","window","confirm","del","catch","err","console","log","finally","deletePerson","setTimeout","formSubmit","preventDefault","updatedInfo","returnInfo","Promise","resolve","updatePerson","updatedSuccessfully","setPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.65cd0a84.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = (props) => {\n  return (\n    <div>\n      {props.name} {props.number} <button data-id={props.id} onClick={props.handleDelClick}> Delete</button>\n      <br />\n    </div>\n  );\n}; \n\nconst PersonsList = ({personslist, handleDelClick}) => {\n  \n  const personList = personslist.map(person => {\n    return( <Person key={person.name} id={person.id} name={person.name} number={person.number} handleDelClick={handleDelClick} />);\n    \n    });\n\n  return (\n      <div>\n        {personList}\n      </div>\n  );\n};\nexport default PersonsList;","import React from \"react\";\n\nconst PersonForm = (props) => {\n    return (\n        <div>\n            <form onSubmit={props.handleFormSubmit}>\n        <div>\n          name:{\" \"}\n          <input onChange={props.handleNameChange} value={props.nameValue} />\n        </div>\n        <br />\n        <div>\n          number:{\" \"}\n          <input\n            onChange={props.handleNumberChange} value={props.numberValue} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n        </div>\n    );\n};\nexport default PersonForm;","import React from \"react\";\n\nconst PersonFilter = (props) => {\n    return (\n        <div>\n            filter shown with:{\" \"}\n      <input onChange={props.handleFilterChange} value={props.value}/>\n\n        </div>\n    );\n};\n\nexport default PersonFilter;","import axios from \"axios\";\r\n\r\nconst url = \"http://localhost:3001/api/persons\";\r\n\r\nconst getAll = () => {\r\n    const req = axios.get(url);\r\n    return req.then(response => response.data);\r\n}\r\n\r\nconst create = (person) => {\r\n    const req = axios.post(url, person);\r\n    return req.then(response => response.data);\r\n}\r\n\r\nconst remove = (id) => {\r\n    const req = axios.delete(`${url}/${id}`)\r\n    return req;\r\n  }\r\n\r\nconst update = (id, newDetails) => {\r\n    const req = axios.put(`${url}/${id}`, newDetails);\r\n    return req.then(response => response.data);\r\n} \r\nexport default {getAll, create, remove, update}","import React from 'react'\r\n\r\nconst favorableStyle = {\r\n  color: 'green',\r\n  background: 'lightgrey',\r\n  fontSize: 20,\r\n  border: '5px solid green',\r\n  borderRadius: 5,\r\n  padding: '10px',\r\n  marginBottom: '30px'\r\n}\r\n\r\nconst errorStyle = {\r\n  color: 'red',\r\n  background: 'lightgrey',\r\n  fontSize: 20,\r\n  border: '5px solid red',\r\n  borderRadius: 5,\r\n  padding: '10px',\r\n  marginBottom: '30px'\r\n}\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n\r\n    if (message.includes('has already been removed from server')){\r\n      return (\r\n        <div style={errorStyle} className=\"error\">\r\n          {message}\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div style={favorableStyle} className=\"error\">\r\n          {message}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\nexport default Notification","import React, { useEffect, useState } from \"react\";\nimport PersonsList from \"./components/Person\";\nimport PersonForm from \"./components/personForm\";\nimport PersonFilter from \"./components/personFilter\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notifications\";\nimport { memberExpression } from \"@babel/types\";\n\nconst App = () => {\n \n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [nameFilter, setNameFilter] = useState(\"\");\n  const [errMessage, setErrMessage] = useState(null);\n  \n  \n  useEffect(() => {\n      personService.getAll().then(fetchPersons => {\n        setPersons(fetchPersons);\n      })\n  }, []);\n\n  const personName = persons.map(person => {\n    return person.name.toLocaleUpperCase();\n  });\n\n    const filterPersonList = persons.filter(person => {\n    return person.name.toUpperCase().includes(nameFilter.toUpperCase());\n  });\n\n  \n  \n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n  \n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    setNameFilter(event.target.value);\n  };\n\n  const deletePerson = (id) => {\n    var del = true;\n    personService.remove(id).catch(err => {\n      console.log(err);\n      del = false;\n    }).finally(() => {\n     if(del){\n        setPersons(persons.filter(person => person.id !== id))\n     }\n    })\n    \n  }\n\n  const handleDelClick = (event) => {\n    const id = parseInt(event.target.dataset.id);\n    const specificPerson = persons.find(person => person.id === id);\n    const delPerson = window.confirm(`Delete ${specificPerson.name}?`);\n    if(delPerson){\n      deletePerson(id);\n    }\n    setPersons(persons.filter(person => person.id !== specificPerson.id))\n    setErrMessage(\n      `${specificPerson.name} was successfully deleted`\n    )\n     \n    setTimeout(() => {\n      setErrMessage(null)\n    }, 5000)\n  \n    \n  }\n\n  const updatePerson = () => {\n    const person = persons.find(person => person.name.toUpperCase() === newName.toUpperCase());\n    const updateConf = window.confirm(`${person.name} is already added to phonebook, replace the old number with a new one?`);\n\n    if(updateConf){\n      const updatedInfo = {...person, number:newNumber};\n      const id = person.id;\n      return personService.update(id, updatedInfo).then(returnInfo => {\n        setPersons(persons.map(person => (person.id ? person : returnInfo)));\n        \n        \n        return true;\n      })\n    }\n    else{\n      return Promise.resolve(false);\n    }\n\n  }\n\n  const formSubmit = (event) => {\n    event.preventDefault();\n\n    if (personName.includes(newName.toLocaleUpperCase())) {\n\n      updatePerson().then(updatedSuccessfully => {\n        if(updatedSuccessfully){\n          \n          setErrMessage(`${newName} was successfully updated`)\n        setTimeout(() => {\n          setErrMessage(null)\n        }, 5000)\n       }\n      }).catch(() => {\n        setErrMessage(\n          `Information of ${newName} has already been removed from server`\n        )\n            })\n    }\n    else {\n        const person = {\n        name: newName,\n        number:newNumber\n       };\n       personService.create(person).then(setPerson => {\n              setPersons(persons.concat(setPerson))\n              setNewName('');\n              setNewNumber('');\n              setErrMessage(`${newName} was successfully added`)\n              setTimeout(() => {setErrMessage(null)}, 5000)\n      });\n   \n    }\n     \n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errMessage} />\n      <PersonFilter handleFilterChange={(event) => handleFilterChange(event)} value = {nameFilter} />\n      <h2>add a new</h2>\n      <PersonForm \n      nameValue={newName}\n      numberValue={newNumber}\n      handleFormSubmit={(event) => formSubmit(event)}\n      handleNameChange = {(event) => handleNameChange(event)}\n      handleNumberChange = {(event) => handleNumberChange(event)}\n   \n      />\n      <h2>Numbers</h2>\n      <PersonsList personslist={filterPersonList} handleDelClick={(event) => handleDelClick(event)}/>\n    </div>\n  );\n};\n\nexport default App;","import ReactDOM from 'react-dom'\nimport App from './App.js'\n\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}